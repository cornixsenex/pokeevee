
//Basically trigger pulls camera to middle cutscene, battle, exits and entrances, reverse ledge climb?



//President sees player and is afraid

//Gio mocks him


const OBJ_EVENT_ID_CICERO = 3
const OBJ_EVENT_ID_GIO = 1
const OBJ_EVENT_ID_MEWTWO_ARMOR = 2
const OBJ_EVENT_ID_SOLDIER1 = 4
const OBJ_EVENT_ID_SOLDIER2 = 5
const OBJ_EVENT_ID_SOLDIER3 = 6
const GIO_FIELD_PIC = 10
const MEWTWO_ARMOR_FIELD_PIC = 11
const CICERO_FIELD_PIC = 12
const SOLDIER_FIELD_PIC = 13
const SURGE_FIELD_PIC = 14
const MAXIE_FIELD_PIC = 9


mapscripts Capital_MapScripts {}

script Capital_EventScript_DeskTest {
	lock
	if (flag(FLAG_FOLLOWER_ACTIVE)) {
		msgbox (Capital_Text_DeskTestYes)
	} else {
		msgbox (Capital_Text_DeskTestNo)
	}
	closemessage
	release
	end
}


script Capital_EventScript_GioTrigger1 {
	lock
	setvar (VAR_CAPITAL_STATE, 1)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioTrigger2 {
	lock
	setvar (VAR_CAPITAL_STATE, 2)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioTrigger3 {
	lock
	setvar (VAR_CAPITAL_STATE, 3)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioTrigger4 {
	lock
	setvar (VAR_CAPITAL_STATE, 4)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioPresident {
	//Player faces the action
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_PLAYER, Common_Movement_FaceRight)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_PLAYER, Common_Movement_FaceLeft)
	}
	waitmovement (0)
	//Cicero faces player
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceLeft)
			waitmovement (0)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceRight)
			waitmovement (0)
	}
	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_ExclamationMark)
	waitmovement (0)
	special (SpawnCameraObject)
	//Camera pan to center
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera1)
		case 2:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera2)
		case 3:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera3)
		case 4:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera4)

	}
	waitmovement(0)
	special (RemoveCameraObject)

	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero1)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)

	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio1)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)

	if (var(VAR_CAPITAL_STATE) > 2) {
		applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceLeft)
		waitmovement (0)
	}

	applymovement (OBJ_EVENT_ID_GIO, Common_Movement_FaceRight)
	waitmovement (0)

	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio2)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)

	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_ExclamationMark)
	waitmovement (0)

	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero2)
	closemessage
	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceRight)
	waitmovement (0)
	msgbox(Capital_Text_Cicero3)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)

	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio3)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)

	applymovement (OBJ_EVENT_ID_SOLDIER2, Capital_Movement_Soldier2A)
	applymovement (OBJ_EVENT_ID_SOLDIER3, Capital_Movement_Soldier3A)
    waitmovement (0)






	return
}

script Capital_EventScript_GioSouth {
	setflag(FLAG_FOLLOWER_ALT_APPROACH)
	end
}

script Capital_EventScript_GioApproach {
	clearflag(FLAG_FOLLOWER_ALT_APPROACH)
	end
}

movement Capital_Movement_PanCamera1 {
	walk_right * 7
}

movement Capital_Movement_PanCamera2 {
	walk_diag_northeast
	walk_right * 6
}

movement Capital_Movement_PanCamera3 {
	walk_left * 7
}

movement Capital_Movement_PanCamera4 {
	walk_diag_northwest
	walk_left * 6
}


text Capital_Text_DeskTestYes {
	format("Yup you have a follower rn")
}

text Capital_Text_DeskTestNo {
	format("Nope you aint got a follwer rn")
}

text Capital_Text_Cicero1 {
	format("My god! Giovanni! They're here!")
}

text Capital_Text_Gio1 {
	format("You fool...")
}

text Capital_Text_Gio2 {
	format("You call yourself a man, old Cicero, shaking and crying at merely the sight of this child? You're can't master your own emotions let alone this rebellion. Thererfore I relieve you of your duties and resume my title as head of state.")
}

text Capital_Text_Cicero2 {
	format("You can't do that! It's treason!")
}

text Capital_Text_Cicero3 {
	format("Guards! Treason!")
}

text Capital_Text_Gio3 {
	format("You still don't understand there is a new power rising.")
}

text Capital_Text_Soldier1 {
	format("We serve Giovanni.")
}






