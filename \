
//Basically trigger pulls camera to middle cutscene, battle, exits and entrances, reverse ledge climb?



//President sees player and is afraid

//Gio mocks him


const OBJ_EVENT_ID_CICERO = 3
const OBJ_EVENT_ID_GIO = 1
const OBJ_EVENT_ID_MEWTWO_ARMOR = 2
const OBJ_EVENT_ID_PERSIAN = 31
const OBJ_EVENT_ID_SOLDIER1 = 4
const OBJ_EVENT_ID_SOLDIER2 = 5
const OBJ_EVENT_ID_SOLDIER3 = 6
const GIO_FIELD_PIC = 10
const MEWTWO_ARMOR_FIELD_PIC = 11
const CICERO_FIELD_PIC = 12
const SOLDIER_FIELD_PIC = 13
const SURGE_FIELD_PIC = 14
const MAXIE_FIELD_PIC = 9


mapscripts Capital_MapScripts {}

script Capital_EventScript_DeskTest {
	lock
	if (flag(FLAG_FOLLOWER_ACTIVE)) {
		msgbox (Capital_Text_DeskTestYes)
	} else {
		msgbox (Capital_Text_DeskTestNo)
	}
	closemessage
	release
	end
}


script Capital_EventScript_GioTrigger1 {
	lock
	setvar (VAR_CAPITAL_STATE, 1)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioTrigger2 {
	lock
	setvar (VAR_CAPITAL_STATE, 2)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioTrigger3 {
	lock
	setvar (VAR_CAPITAL_STATE, 3)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioTrigger4 {
	lock
	setvar (VAR_CAPITAL_STATE, 4)
	call (Capital_EventScript_GioPresident)
	release
}

script Capital_EventScript_GioPresident {
	//Player faces the action
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_PLAYER, Common_Movement_FaceRight)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_PLAYER, Common_Movement_FaceLeft)
	}
	waitmovement (0)
	//Cicero faces player
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceLeft)
			waitmovement (0)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceRight)
			waitmovement (0)
	}
	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_ExclamationMark)
	waitmovement (0)
	special (SpawnCameraObject)
	//Camera pan to center
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera1)
		case 2:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera2)
		case 3:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera3)
		case 4:
			applymovement (OBJ_EVENT_ID_CAMERA, Capital_Movement_PanCamera4)

	}
	waitmovement(0)
	special (RemoveCameraObject)
	//Surprise
	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero1)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	//fool
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio1)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)
	//Cicero face Gio
	if (var(VAR_CAPITAL_STATE) > 2) {
		applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceLeft)
		waitmovement (0)
	}
	//Gio face Cicero
	applymovement (OBJ_EVENT_ID_GIO, Common_Movement_FaceRight)
	waitmovement (0)
	//gio gloat
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio2)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)

	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_ExclamationMark)
	waitmovement (0)
	//cicero appeal
	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero2)
	closemessage
	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceRight)
	waitmovement (0)
	msgbox(Capital_Text_Cicero3)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	//gloat
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio3)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)
	//soldiers approach
	applymovement (OBJ_EVENT_ID_SOLDIER2, Capital_Movement_Soldier2A)
	applymovement (OBJ_EVENT_ID_SOLDIER3, Capital_Movement_Soldier3A)
    waitmovement (0)
	//soldier reply
	load_field_pic (SOLDIER_FIELD_PIC, 190, 98)
	msgbox (Capital_Text_Soldier1)
	closemessage
	destroy_field_pic(SOLDIER_FIELD_PIC)
	delay (5)
	//cicero warning
	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceLeft)
	waitmovement (0)

	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero4)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	//Gio victory
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio4)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)
	//Yell
	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero5)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	//lets go
	load_field_pic (SOLDIER_FIELD_PIC, 190, 98)
	msgbox (Capital_Text_Soldier2)
	closemessage
	destroy_field_pic(SOLDIER_FIELD_PIC)
	delay (5)
	//turn to leave
	applymovement (OBJ_EVENT_ID_CICERO, Common_Movement_FaceDown)
	applymovement (OBJ_EVENT_ID_SOLDIER2, Common_Movement_FaceDown)
	waitmovement (0)
	//not okay+
	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero6)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	//they walk halfway in one direction
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_CICERO, Capital_Movement_CiceroR1)
			applymovement (OBJ_EVENT_ID_SOLDIER2, Capital_Movement_Soldier2R1)
			applymovement (OBJ_EVENT_ID_SOLDIER3, Capital_Movement_Soldier3R1)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_CICERO, Capital_Movement_CiceroL1)
			applymovement (OBJ_EVENT_ID_SOLDIER1, Capital_Movement_Soldier1L1)
			applymovement (OBJ_EVENT_ID_SOLDIER2, Capital_Movement_Soldier2L1)
			applymovement (OBJ_EVENT_ID_SOLDIER3, Capital_Movement_Soldier3L1)
	}
	//Gio faces down
	applymovement (OBJ_EVENT_ID_GIO, Common_Movement_FaceDown)
	waitmovement (0)
	//Cicero final appeal to authority
	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero7)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	//enough
	load_field_pic (SOLDIER_FIELD_PIC, 190, 98)
	msgbox (Capital_Text_Soldier3)
	closemessage
	destroy_field_pic(SOLDIER_FIELD_PIC)
	delay (5)
	//Cicero and soldiers exit
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_CICERO, Capital_Movement_CiceroR2)
			applymovement (OBJ_EVENT_ID_SOLDIER2, Capital_Movement_CiceroR2)
			applymovement (OBJ_EVENT_ID_SOLDIER3, Capital_Movement_CiceroR2)
			applymovement (OBJ_EVENT_ID_SOLDIER1, Capital_Movement_CiceroR2)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_CICERO, Capital_Movement_CiceroL2)
			applymovement (OBJ_EVENT_ID_SOLDIER2, Capital_Movement_CiceroL2)
			applymovement (OBJ_EVENT_ID_SOLDIER3, Capital_Movement_CiceroL2)
			applymovement (OBJ_EVENT_ID_SOLDIER1, Capital_Movement_CiceroL2)
	}
	load_field_pic (CICERO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Cicero8)
	closemessage
	destroy_field_pic(CICERO_FIELD_PIC)
	delay (5)
	waitmovement (0)
	//Gio faces player	
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
		case 2:
			applymovement (OBJ_EVENT_ID_GIO, Common_Movement_FaceLeft)
		case 3:
		case 4:
			applymovement (OBJ_EVENT_ID_GIO, Common_Movement_FaceRight)
	}
	waitmovement (0)
	//Gio welcomes player to approach	
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio5)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)

	//Gio tells Mewtwo to move if needed then faces up the player
	//YES NEEDED
	if (var(VAR_CAPTIAL_STATE) < 3) {			
		load_field_pic (GIO_FIELD_PIC, 190, 98)
		msgbox(Capital_Text_GioMewtwoMove)
		closemessage
		destroy_field_pic(GIO_FIELD_PIC)
		delay (5)
		applymovement (OBJ_EVENT_ID_MEWTWO_ARMOR, Capital_Movement_MewtwoR1)
		waitmovement (0)
		applymovement (OBJ_EVENT_ID_GIO, Capital_Movement_GioR1)
		applymovement (OBJ_EVENT_ID_PERSIAN, Capital_Movement_PersianR1)
		applymovement (OBJ_EVENT_ID_MEWTWO_ARMOR, Capital_Movement_MewtwoR2)
		waitmovement (0)
		applymovement (OBJ_EVENT_ID_GIO, Capital_Movement_GioR2)
		applymovement (OBJ_EVENT_ID_PERSIAN, Capital_Movement_PersianR2)
		applymovement (OBJ_EVENT_ID_MEWTWO_ARMOR, Capital_Movement_MewtwoR3)
		waitmovement (0)
	//NOT NEEDED
	} else {
		applymovement (OBJ_EVENT_ID_GIO, Capital_Movement_GioL1)
		applymovement (OBJ_EVENT_ID_PERSIAN, Capital_Movement_PersianL1)
		waitmovement (0)
	}
	//The player approaches Gio
	switch (var(VAR_CAPITAL_STATE)) {
		case 1:
			applymovement (OBJ_EVENT_ID_PLAYER, Capital_Movement_Player1A)
			if (flag(FLAG_FOLLOWER_ACTIVE))) {
				applymovement (OBJ_EVENT_ID_FOLLOWER, Capital_Movement_Follower1A)
			}
		case 2:
			applymovement (OBJ_EVENT_ID_PLAYER, Capital_Movement_Player2A)
			if (flag(FLAG_FOLLOWER_ACTIVE))) {
				applymovement (OBJ_EVENT_ID_FOLLOWER, Capital_Movement_Follower2A)
			}
		case 3:
			applymovement (OBJ_EVENT_ID_PLAYER, Capital_Movement_Player3A)
			if (flag(FLAG_FOLLOWER_ACTIVE))) {
				applymovement (OBJ_EVENT_ID_FOLLOWER, Capital_Movement_Follower3A)
			}
		case 4:
			applymovement (OBJ_EVENT_ID_PLAYER, Capital_Movement_Player4A)
			if (flag(FLAG_FOLLOWER_ACTIVE))) {
				applymovement (OBJ_EVENT_ID_FOLLOWER, Capital_Movement_Follower4A)
			}
	}
	//Gio bean expectin	+
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio6)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)
	waitmovement (0)
	msgbox(Capital_Text_PlayerJoinGio, MSGBOX_YESNO)
	if (var(VAR_RESULT) == NO) {
		load_field_pic (GIO_FIELD_PIC, 190, 98)
		msgbox(Capital_Text_Gio7No)
		closemessage
		destroy_field_pic(GIO_FIELD_PIC)
		delay (5)
	} else {
		load_field_pic (GIO_FIELD_PIC, 190, 98)
		msgbox(Capital_Text_Gio7Yes)
		closemessage
		destroy_field_pic(GIO_FIELD_PIC)
		delay (5)
	}
	//Gio commands Mewtwo to attack player
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio8)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)
	//No
	load_field_pic (MEWTWO_ARMOR_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Mewtwo1)
	closemessage
	destroy_field_pic(MEWTWO_ARMOR_FIELD_PIC)
	delay (5)
	applymovement (OBJ_EVENT_ID_GIO, Common_Movement_ExclamationMark)
	waitmovement (0)
	//thats an order
	load_field_pic (GIO_FIELD_PIC, 190, 98)
	msgbox(Capital_Text_Gio9)
	closemessage
	destroy_field_pic(GIO_FIELD_PIC)
	delay (5)


		




	return
}

script Capital_EventScript_GioSouth {
	setflag(FLAG_FOLLOWER_ALT_APPROACH)
	end
}

script Capital_EventScript_GioApproach {
	clearflag(FLAG_FOLLOWER_ALT_APPROACH)
	end
}

movement Capital_Movement_PanCamera1 {
	walk_right * 7
}

movement Capital_Movement_PanCamera2 {
	walk_diag_northeast
	walk_right * 6
}

movement Capital_Movement_PanCamera3 {
	walk_left * 7
}

movement Capital_Movement_PanCamera4 {
	walk_diag_northwest
	walk_left * 6
}

movement Capital_Movement_Soldier2A {
	walk_down * 3
	walk_left * 2
	face_up
}

movement Capital_Movement_Soldier3A {
	walk_left * 4
	walk_down
}

movement Capital_Movement_CiceroR1 {
	walk_down
	walk_right * 2
	walk_up
	walk_right
	face_up
}


movement Capital_Movement_Soldier2R1 {
	walk_right * 2
	walk_up
	walk_right * 2
}

movement Capital_Movement_Soldier3R1 {
	walk_down * 2
	walk_right * 2
	walk_up
	face_right
}

movement Capital_Movement_CiceroL1 { 
	walk_down
	walk_left * 3
	walk_up
	walk_left 
	face_down
}

movement Capital_Movement_Soldier1L1 {
	walk_down * 2
	walk_left * 6
	walk_up
	face_left
}

movement Capital_Movement_Soldier2L1 {
	walk_left * 3
	walk_up
	walk_left * 2
}

movement Capital_Movement_Soldier3L1 { 
	walk_down * 2
	walk_left * 3
	walk_up
	face_left
}

movement Capital_Movement_CiceroL2 {
	walk_left * 7
}

movement Capital_Movement_MewtwoRight1 {
	walk_right * 2
}

movement Capital_Movement_GioR1 {
	walk_right
	face_up
}

movement Capital_Movement_PersianR1 {
	walk_down
}

movement Capital_Movement_MewtwoR2 {
	walk_right * 2
}

movement Capital_Movement_GioR2 {
	walk_up
	face_left
}

movement Capital_Movement_PersianR2 {
	walk_right
	face_left
}

movement Capital_Movement_MewtwoR3 {
	walk_right * 3
	face_down
}

text Capital_Text_DeskTestYes {
	format("Yup you have a follower rn")
}

text Capital_Text_DeskTestNo {
	format("Nope you aint got a follwer rn")
}

text Capital_Text_Cicero1 {
	format("My god! Giovanni! They're here!")
}

text Capital_Text_Gio1 {
	format("You fool...")
}

text Capital_Text_Gio2 {
	format("You call yourself a man, old Cicero, shaking and crying at merely the sight of this child? You're can't master your own emotions let alone this rebellion. Thererfore I relieve you of your duties and resume my title as head of state.")
}

text Capital_Text_Cicero2 {
	format("You can't do that! It's treason!")
}

text Capital_Text_Cicero3 {
	format("Guards! Treason!")
}

text Capital_Text_Gio3 {
	format("You still don't understand there is a new power rising.")
}

text Capital_Text_Soldier1 {
	format("We serve Giovanni.")
}

text Capital_Text_Cicero4 {
	format("You traitor! Can't you see this is...")
}

text Capital_Text_Gio4 {
	format("Enough! Old fool, can't you see this is my hour? Be gone and lament your failures in vain.")
}

text Capital_Text_Cicero5 {
	format("You can't do this!")
}

text Capital_Text_Soldier2 {
	format("Let's go.")
}

text Capital_Text_Cicero6 {
	format("I'm still the president!")
}

text Capital_Text_Cicero7 {
	format("I was elected by the senators")
}

text Capital_Text_Soldier3 {
	format("We've heard enough of that.")
}

text Capital_Text_Cicero8 {
	format("Democracy!")
}

text Capital_Text_Gio5 {
	format("You've done well {PLAYER} now you may approach me.")
}

text Capital_Text_GioMewtwoMove {
	format("and stand aside Mewtwo permit he pass")
}

text Capital_Text_Gio6 {
	format("You must be powerful to destroy Blaine and find your way to our coronation. I've heard many rumours about you {PLAYER} and now I see you with my own two eyes. I am Giovanni your tyrant king. You may be great but Mewtwo far greater. I'm giving you the choice, you may join me or be destroyed. Now speak. What will we do?")
}

text Capital_Text_PlayerJoinGio {
	format("Will you surrender to Giovanni?")
}

text Capital_Text_Gio7Yes {
	format("You are more foolish than I had assumed if you believed that I would let you live.")
}

text Capital_Text_Gio7No {
	format("Then your journey ends here you foolish boy.")
}

text Capital_Text_Gio8 {
	format("Mewtwo the time has come. Destroy the boy and then put a swift end to this revolt.")
}

text Capital_Text_Gio9 {
	format("Mewtwo! I command you!")
}

text Capital_Text_Mewtwo1 {
	format("No.")
}

text Capital_Text_




//Mewtwo even you cannot break those cuffs




