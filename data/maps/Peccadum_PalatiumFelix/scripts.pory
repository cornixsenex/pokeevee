
//used in all games
const WAGER = VAR_TEMP_0
const WAGER_REFUND = FLAG_TEMP_2 //when set give refund in End script

//Blue Roulette vars
const WAGER_TYPE = VAR_TEMP_1
const WAGER_NUMBER = VAR_TEMP_2 //Specific number chosen to wager on 0-30 all match. 31 is 00
const WAGER_RANGE = VAR_TEMP_3 //Specific Range on a range wager
const WAGER_COLOR = VAR_TEMP_4 //Specific color on a color wager

const OBJ_EVENT_BRDEALER1 = 4
const OBJ_EVENT_BRDEALER2 = 3

mapscripts Peccadum_PalatiumFelix_MapScripts {}



script Peccadum_PalatiumFelix_Script_BlueRouletteDealer {
    lock
    faceplayer
    //Hello I am the roulette dealer
    msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteDealerIntro)
    //if broke tell you to get coins
    checkcoins (VAR_TEMP_1)
    if (var(VAR_TEMP_1) < 5) {
        msgbox (Peccadum_PalatiumFelix_Text_NoCoins)
        call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
    }
    //wanna play?
    msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteDealerBegin, MSGBOX_YESNO)
    if (var(VAR_RESULT) == FALSE) {
        call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
    } else {
        call (Peccadum_PalatiumFelix_Script_BlueRouletteBrain)
    }
}

script Peccadum_PalatiumFelix_Script_BlueRouletteBrain {
    //How much will you wager
    call (Peccadum_PalatiumFelix_Script_GetCoinWager)
    //What type of wager (Num, color, range)
	call (Peccadum_PalatiumFelix_Script_BlueRouletteGetWagerType)
    //Confirm type and select specific wager (which num, which color, what range)
	switch (var(WAGER_TYPE)) {
		case 0:
			call (Peccadum_PalatiumFelix_Script_BlueRouletteGetNumberWager)
		case 1:
			call (Peccadum_PalatiumFelix_Script_BlueRouletteGetColorWager)
		case 2:
			call (Peccadum_PalatiumFelix_Script_BlueRouletteGetRangeWager)
		case 3:
			call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
		default:
			msgbox ("ERROR\nWAGER_TYPE OOB")
			closemessage
			release
			end
	}
    //good luck
	//clear wager refund
	clearflag (WAGER_REFUND)
    //spin
    //announce spin
    //check if win or lose
    //announce win or lose
    //payout if win
    //play again?
}

script Peccadum_PalatiumFelix_Script_GetCoinWager {
	//set wager refund
	if (!flag(WAGER_REFUND)) {
		setflag (WAGER_REFUND)
	}
    //reset wager
	setvar (WAGER, 0)
    //show coin box
	showcoinsbox (21, 1)
    //msgbox What is your wager?
	msgbox (SaltySpitoon_Text_HiLoKabuto_GetWager)
    closemessage
    multichoice (0, 0, MULTI_GET_COIN_WAGER, TRUE)
    copyvar (WAGER, VAR_RESULT)
	checkcoins (VAR_RESULT)
    switch (var(WAGER)) {
		//0: 5
		case 0:
			if (var(VAR_RESULT) >= 5) {
				removecoins (5)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
				return
			} else {
				clearflag (WAGER_REFUND)
				hidecoinsbox (21, 1)
				msgbox (SaltySpitoon_Text_HiLoKabuto_WagerPoor)
				call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
			}
		//1: 25
		case 1:
			if (var(VAR_RESULT) >= 25) {
				removecoins (25)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
				return
			} else {
				hidecoinsbox (21, 1)
				msgbox (SaltySpitoon_Text_HiLoKabuto_WagerPoor)
				call (Peccadum_PalatiumFelix_Script_GetCoinWager)
			}
		//2: 100
		case 2:
			if (var(VAR_RESULT) >= 100) {
				removecoins (100)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
				return
			} else {
				hidecoinsbox (21, 1)
				msgbox (SaltySpitoon_Text_HiLoKabuto_WagerPoor)
				call (Peccadum_PalatiumFelix_Script_GetCoinWager)
			}
		//3: 500
		case 3:
			if (var(VAR_RESULT) >= 500) {
				removecoins (500)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
				return
			} else {
				hidecoinsbox (21, 1)
				msgbox (SaltySpitoon_Text_HiLoKabuto_WagerPoor)
				call (Peccadum_PalatiumFelix_Script_GetCoinWager)
			}
		//4: 1000
		case 4:
			if (var(VAR_RESULT) >= 1000) {
				removecoins (1000)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
				return
			} else {
				hidecoinsbox (21, 1)
				msgbox (SaltySpitoon_Text_HiLoKabuto_WagerPoor)
				call (Peccadum_PalatiumFelix_Script_GetCoinWager)
			}
		//5: 2500
		case 5:
			if (var(VAR_RESULT) >= 2500) {
				removecoins (2500)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
				return
			} else {
				hidecoinsbox (21, 1)
				msgbox (SaltySpitoon_Text_HiLoKabuto_WagerPoor)
				call (Peccadum_PalatiumFelix_Script_GetCoinWager)
			}
		case 6:
			clearflag (WAGER_REFUND)
			hidecoinsbox (21, 1)
			call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
	}
	msgbox("ERROR\nBottom of GetCoinWager")
	closemessage
	release
	end
}

script Peccadum_PalatiumFelix_Script_BlueRouletteGetWagerType {
	//reset wager type
	setvar (WAGER_TYPE, 0)
	//msgbox What type of wager will you be making
	msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteGetWagerType)
	closemessage
	multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_WAGER_TYPE, TRUE)
	copyvar (WAGER_TYPE, VAR_RESULT)
	//confirm wager type or exit on NVM
	switch (var(WAGER_TYPE)) {
		//Num
		case 0:
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmNumberWager, MSGBOX_YESNO)
		//Color
		case 1:
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmColorWager, MSGBOX_YESNO)
		//Range
		case 2:	
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRangeWager, MSGBOX_YESNO)
		//NVM
		case 3:
			call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
	}
	if (var(VAR_RESULT) == YES) {
			return
		} else {
			call (Peccadum_PalatiumFelix_Script_BlueRouletteGetWagerType)
		}
}

script Peccadum_PalatiumFelix_Script_BlueRouletteGetNumberWager {
	//reset range wager
	setvar (WAGER_RANGE, 0)
	//reset number wager
	setvar (WAGER_NUMBER, 0)
	//what number will you bet - Tell us where 0 and 00 are plsa
	msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteGetNumberWager)
	closemessage
	//Determine Range (0-00), (1-10), (11-20), (21-31), NVM
	multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_WAGER_RANGE, TRUE)
	//Then secondary multi (selection within the range you just selected)
	switch (var(VAR_RESULT)) {
		//0 et 00
		case 0:
			multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_RANGE_0_NUMBER, TRUE)
		//1 - 10
		case 1:
			multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_RANGE_1_NUMBER, TRUE)
		//11 - 20
		case 2:
			multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_RANGE_2_NUMBER, TRUE)
		//21 - 30
		case 3:
			multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_RANGE_3_NUMBER, TRUE)
		//nvm
		case 4:
		default:
	}

	//confirm selection
	//store selection in WAGER_NUMBER
	//return
}

script Peccadum_PalatiumFelix_Script_BlueRouletteGetColorWager {
	//reset color wager
	setvar (WAGER_COLOR, 0)
	//what color will you bet 
	msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteGetColorWager)
	closemessage
	//Determine color, NVM
	multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_WAGER_COLOR, TRUE)
	//confirm selection
	//store selection in WAGER_COLOR
	//return
}

script Peccadum_PalatiumFelix_Script_BlueRouletteGetRangeWager {
	//reset range wager
	setvar (WAGER_RANGE, 0)
	//msg what range will you bet
	msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteGetRangeWager)
	closemessage
	//multi determine range
	multichoice (0, 0, MULTI_GET_BLUE_ROULETTE_WAGER_RANGE, TRUE)
	//confirm range
	copyvar (WAGER_RANGE, VAR_RESULT)
	switch (var(WAGER_RANGE)) {
		//0 et 00
		case 0:
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange0, MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				return
			} else {
				call (Peccadum_PalatiumFelix_Script_BlueRouletteGetRangeWager)
			}
		//1 - 10
		case 1:
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange1, MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				return
			} else {
				call (Peccadum_PalatiumFelix_Script_BlueRouletteGetRangeWager)
			}
		//11 - 20
		case 2:
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange2, MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				return
			} else {
				call (Peccadum_PalatiumFelix_Script_BlueRouletteGetRangeWager)
			}
		//21 - 30
		case 3:
			msgbox (Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange3, MSGBOX_YESNO)
			if (var(VAR_RESULT) == YES) {
				return
			} else {
				call (Peccadum_PalatiumFelix_Script_BlueRouletteGetRangeWager)
			}
		//nvm
		case 4:
			call (Peccadum_PalatiumFelix_Script_BlueRouletteEnd)
		default:
			msgbox ("ERROR\nWAGER_RANGE OOB")
			closemessage
			release
			end
	}
}

script Peccadum_PalatiumFelix_Script_BlueRouletteEnd  {
	if (flag(WAGER_REFUND)) {
		showcoinsbox (21, 1)
		msgbox (CasinoDealer_Text_Refund)
		switch (var(WAGER)) {
			case 0:	
				addcoins (5)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
			case 1:	
				addcoins (25)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
			case 2:	
				addcoins (100)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
			case 3:	
				addcoins (500)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
			case 4:	
				addcoins (1000)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
			case 5:
				addcoins (2500)
				updatecoinsbox (21, 1)
				playse (SE_SHOP)
				waitse
				hidecoinsbox (21, 1)
			default:
				msgbox("ERROR\nWAGER OOB in RefundSwitch")
				closemessage
				release
				end
		}
	}	
    //see you again
    msgbox (CasinoDealer_Text_Bye)
    //face dealer(s) down
    applymovement (OBJ_EVENT_BRDEALER1, Common_Movement_FaceDown)
    applymovement (OBJ_EVENT_BRDEALER2, Common_Movement_FaceDown)
    waitmovement (0)
    closemessage
    release
    end
}
    
text Peccadum_PalatiumFelix_Text_BlueRouletteDealerIntro {
    format("I am the Blue Roulette table dealer.")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteDealerBegin {
    format("Would you like to play a game of roulette?")
}

text Peccadum_PalatiumFelix_Text_NoCoins {
    format("Excuse me sir, but coins are required to play games at Palatium Felix. Please speak with the cashier to purchase more.")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteGetWagerType {
	format("What kind of wager will you be placing?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmNumberWager {
	format("A wager on a winning number pays thirty to one. Are you sure that you will place a wager on a single number?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmColorWager {
	format("The payout for a wager on color depends on which color you wager on. Both {COLOR RED}red {COLOR DARK_GRAY}and {COLOR BLUE}blue {COLOR DARK_GRAY}pay out at two to one while {COLOR GREEN}green {COLOR DARK_GRAY}pays out higher, fifteen to one. Are you sure that you will bet on color?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRangeWager {
	format("A winning bet on range pays three to one, except for zero and double zero which pays the same as {COLOR GREEN}green{COLOR DARK_GRAY}, fifteen to one. Are you sure you want to wager on range?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteGetNumberWager {
	format("There are thirty two individual spaces on the roulette wheel: numbers from one to thirty, single, and double nil. Which number will you be wagering on?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteGetRangeWager {
	format("Which range of numbers will you wager on?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteGetColorWager {
	format("Which color will you be wagering on?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange0 {
	format("You have chosen to wager on the range of zero and double zero. This will payout at three to one. Are you certain?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange1 {
	format("You have chosen to wager on the range of numbers one through ten. This will payout at three to one. Will you confirm this bet?")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange2 {
	format("You have chosen to wager on the range eleven through twenty. This will payout at three to one. Will you confirm this bet? ")
}

text Peccadum_PalatiumFelix_Text_BlueRouletteConfirmRange3 {
	format("You have chosen to wager on the range of numbers from twenty one through thirty. The payout for this bet is three to one. Are you certain you want to place this bet?")
}

text CasinoDealer_Text_Refund {
	format("Here are the unwagered coins back for you.")
}
