mapscripts CasaTurni_MapScripts {

    MAP_SCRIPT_ON_FRAME_TABLE [
        VAR_AENEID_STATE, 8: CasaTurni_Script_TurnusScene
    ]

}

script CasaTurni_Script_TurnusScene {
    lockall
    setvar (VAR_AENEID_STATE, 9)
    //music
	playbgm (MUS_ENCOUNTER_AQUA, FALSE)
    //alert rutuli
    call (CasaTurni_Script_AlertRutuli)
    //move player to position facing up
    applymovement (LOCALID_PLAYER, Common_Moveement_WalkUp3)
    waitmovement (0)
    //R: lets get him
	load_field_pic(FIELD_PIC_RUTULIAN, 190, 98)
    msgbox (CasaTurni_Text_RutuliPre)
    destroy_field_pic (FIELD_PIC_RUTULIAN)
    //T: Dont take my glory
    load_field_pic (FIELD_PIC_TURNUS, 190, 98)
    msgbox (CasaTurni_Text_TurnusPre1)
    call (CasaTurni_Script_AlertRutuli)
    msgbox (CasaTurni_Text_TurnusPre2)
    destroy_field_pic (FIELD_PIC_TURNUS)
    closemessage
    //T to player
    applymovement (LOCALID_CASATURNI_TURNUS, Common_Moveement_WalkDown2)
    waitmovement (0)
    //Face eachother
    applymovement (LOCALID_PLAYER, Common_Movement_FaceLeft)
    applymovement (LOCALID_CASATURNI_TURNUS, Common_Movement_FaceLeft)
    waitmovement (0)
    //T pre
    load_field_pic (FIELD_PIC_TURNUS, 190, 98)
    msgbox (CasaTurni_Text_TurnusPre3)
    destroy_field_pic (FIELD_PIC_TURNUS)
    closemessage
    //T battle
    trainerbattle_no_intro (TRAINER_TURNUS, CasaTurni_Text_TurnusLost)
    //T post
    load_field_pic (FIELD_PIC_TURNUS, 190, 98)
    msgbox (CasaTurni_Text_TurnusPost)
    destroy_field_pic (FIELD_PIC_TURNUS)
    closemessage
    //T exit
    applymovement (LOCALID_CASATURNI_TURNUS, Common_Moveement_WalkDown3)
    waitmovement (0)
    //remove T
    removeobject (LOCALID_CASATURNI_TURNUS)
    setobjectxyperm (LOCALID_CASATURNI_TURNUS, 0, 0)
    setobjectmovementtype (LOCALID_CASATURNI_TURNUS, MOVEMENT_TYPE_INVISIBLE)
    addobject (LOCALID_CASATURNI_TURNUS)
    call (CasaTurni_Script_AlertRutuli)
    //R: omg scatter
	load_field_pic(FIELD_PIC_RUTULIAN, 190, 98)
    msgbox (CasaTurni_Text_RutuliPost)
    destroy_field_pic (FIELD_PIC_RUTULIAN)
    closemessage
    //exeunt rutuli
    applymovement (2, Common_Movement_WalkDown)
    applymovement (3, Common_Movement_WalkDown)
    applymovement (4, Common_Movement_WalkLeft)
    applymovement (5, Common_Movement_WalkRight)
    applymovement (6, Common_Movement_WalkLeft)
    applymovement (7, Common_Movement_WalkRight)
    waitmovement (0)
    applymovement (2, Common_Movement_WalkRight)
    applymovement (3, Common_Movement_WalkLeft)
    applymovement (4, Common_Movement_WalkLeft)
    applymovement (5, Common_Movement_WalkRight)
    applymovement (6, Common_Movement_WalkLeft)
    applymovement (7, Common_Movement_WalkRight)
    waitmovement (0)
    applymovement (2, Common_Movement_WalkRight)
    applymovement (3, Common_Movement_WalkLeft)
    applymovement (4, Common_Movement_WalkDown)
    applymovement (5, Common_Movement_WalkDown)
    applymovement (6, Common_Movement_FaceDown)
    applymovement (7, Common_Movement_FaceDown)
    waitmovement (0)
    //remove 56
    removeobject (5)
    setobjectxyperm (5, 0, 0)
    setobjectmovementtype (5, MOVEMENT_TYPE_INVISIBLE)
    addobject (5)

    //set flag
    //fin
    releaseall
    end
}

script CasaTurni_Script_AlertRutuli {
    applymovement (2, Common_Movement_ExclamationMark)
    applymovement (3, Common_Movement_ExclamationMark)
    applymovement (4, Common_Movement_ExclamationMark)
    applymovement (5, Common_Movement_ExclamationMark)
    applymovement (6, Common_Movement_ExclamationMark)
    applymovement (7, Common_Movement_ExclamationMark)
    waitmovement (0)
    return
}
