

const OBJ_EVENT_IGNIS_A = 4
const OBJ_EVENT_IGNIS_B = 5


mapscripts BigIslandS_MapScripts {

	MAP_SCRIPT_ON_TRANSITION {
		if (defeated(TRAINER_IGNIS_GRUNT_2)) {
			call (BigIslandS_Script_HideIgnisGrunts)
		} else {
			call (BigIslandS_Script_ShowIgnisGrunts)
		}
	}

	MAP_SCRIPT_ON_RESUME {
		call (BigIslandS_OnResume)
	}

}


script BigIslandS_OnResume {
	setstepcallback (STEP_CB_ASH)
	end
}


script BigIslandS_Script_IgnisGrunt {
	lock
	faceplayer
	if (var(VAR_ARGO_STATE) < 3) {
		msgbox (BigIslandS_Text_IgnisGruntBlock, MSGBOX_DEFAULT)
		closemessage
	} else {
		call (BigIslandS_Script_IgnisGruntFight)
	}
	end
}

script BigIslandS_Script_IgnisGruntFight {

		msgbox (BigIslandS_Script_IgnisGrunt1Pre, MSGBOX_DEFAULT)
		closemessage

		trainerbattle_two_trainers (TRAINER_IGNIS_GRUNT_2, BigIslandS_Script_IgnisGrunt1Lost, TRAINER_IGNIS_GRUNT_3, BigIslandS_Script_IgnisGrunt2Lost)

		applymovement (OBJ_EVENT_IGNIS_A, Common_Movement_FaceRight)
		applymovement (OBJ_EVENT_IGNIS_B, Common_Movement_FaceLeft)
		waitmovement (0)

		msgbox (BigIslandS_Text_IgnisGruntPost, MSGBOX_DEFAULT)
		closemessage

		applymovement (OBJ_EVENT_IGNIS_A, BigIslandS_Movement_IgnisGruntClear)
		applymovement (OBJ_EVENT_IGNIS_B, BigIslandS_Movement_IgnisGruntClear)
		waitmovement (0)

		call (BigIslandS_Script_HideIgnisGrunts)

		end
}

script BigIslandS_Script_HideIgnisGrunts {

	msgbox("HIDE IGNIS GRUNTS")
	closemessage


	setobjectxyperm (OBJ_EVENT_IGNIS_, 58, 36)
	setobjectmovementtype (OBJ_EVENT_IGNIS_, MOVEMENT_TYPE_FACE_DOWN)

	setobjectxyperm (OBJ_EVENT_IGNIS_, 59, 36)
	setobjectmovementtype (OBJ_EVENT_ARGO, MOVEMENT_TYPE_FACE_DOWN)
	
	hideobjectat (OBJ_EVENT_IGNIS_A, MAP_BIG_ISLAND_S)
	removeobject (OBJ_EVENT_IGNIS_A)

	hideobjectat (OBJ_EVENT_IGNIS_B, MAP_BIG_ISLAND_S)
	removeobject (OBJ_EVENT_IGNIS_B)

	return
}

script BigIslandS_Script_ShowIgnisGrunts {
	setobjectxyperm (OBJ_EVENT_IGNIS_A, 55, 37)
	setobjectmovementtype (OBJ_EVENT_IGNIS_A, MOVEMENT_TYPE_FACE_DOWN)
	addobject (OBJ_EVENT_IGNIS_A)
	showobjectat (OBJ_EVENT_IGNIS_A, MAP_BIG_ISLAND_S)

	setobjectxyperm (OBJ_EVENT_IGNIS_B, 56, 37)
	setobjectmovementtype (OBJ_EVENT_IGNIS_B, MOVEMENT_TYPE_FACE_DOWN)
	addobject (OBJ_EVENT_IGNIS_B)
	showobjectat (OBJ_EVENT_IGNIS_B, MAP_BIG_ISLAND_S)

	return
}


movement BigIslandS_Movement_IgnisGruntClear {
	walk_up * 6
}

//Only native Ignis are welcome here.
text BigIslandS_Text_IgnisGruntBlock {
	format("Onlyay ativenay ignisay areay elcomeway erehay.")
}

//Who is this outsider  He must be here
//To save his little friend
//How dare you try to force your way inside
//We will defend our sacred mountaintop
text BigIslandS_Script_IgnisGrunt1Pre {
	format("Owhay isay isthat outsideray? \N Ehay ustmay ebay erehay otay avesay ishay ittleay iendfray. \N Owhay areday ouyay ytray otay orcefay ouryay ayway insideay? \N Eway illway efendday ouray acredsay ountaintopmay.")
}

//We soon will be avenged
text BigIslandS_Script_IgnisGrunt1Lost {
	format("Eway oonsay illway ebay avengeday.")
}

//You won this one.
text BigIslandS_Script_IgnisGrunt2Lost {
	format("Ouyay onway isthay oneay.")
}

//We must tell Medea of this defeat
text BigIslandS_Text_IgnisGruntPost {
	format("Eway ustmay elltay Edeamay ofay isthay efeatday.")
}



